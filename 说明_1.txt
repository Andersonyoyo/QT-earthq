完成了与震源的通信，还未完成全部测试

获取的震源时间使用单独的对话框显示，并且将该对话框放入到属性页面上，将之前设计的参数设置表使用弹出方式出现，考虑在服务器开启（创建segy文件之前）时弹出并进行设置

09.19
信息显示，在解析获取时间的包中调用函数对引爆时间进行显示

待办：
        1.发送引爆时间（考虑服务器不发送，协调器转发时震源回传时间点时自动获取）给节点后回传的时间误差数据包解析（协议还不知道），在该包中获取数据后调用函数对编辑框进行显示

        2.由于取消了地图上的坐标，节点的GPS信息无法显示，并且无法知道是哪条线上的道（看新的协议，是否在节点上线时传来了该节点的道号和线号，最好在zigbee上线时就传），
    考虑恢复以前的显示方式，包括了所有信息，同时把震源引爆时间和回传误差也加上。

        3.设备显示，分为 zigbee上线，WiFi上线（蓝色3），数据传输中（黄色0），数据传输完成（绿色2），故障（红色1） ――――位图已绘制好
       

遇到的问题：
       1.在调试时遇到本地函数定义非法，从最开始的错误的上几条语句开始查找语法错误：可能使用函数错误或者符号不匹配（已解决）

       2.将获得的时间数据串显示到对话框中始终出现断点，引爆时间显示在线程中进行，可能是引起中断的原因，将函数调用放到main函数中，如果还不行，考虑不使用编辑框，
    换为使用最开始的文本显示方式，在里面添加引爆时间和误差，
      
         引爆时间显示在线程中进行 ―― 设定标志位，与更新树节点和地图显示一样（NeedUpdateView），界面显示由UI线程控制

09.20
待办：

       1.将属性面板进行恢复，使用最初的显示方式，将每个节点的所有信息都显示出来（在devicedescribe中添加成员：震源引爆时间和时间误差：每个不一样）――――信息在表格中可用看到，还是单独进行显示，不恢复
        
       2.修改界面风格

       3.将单道数据显示放入底部

9.21
待办：
       数据存储：下位机传回数据是一个包多数据，现在按照线号、道号、包号存储，查看丢包情况，在写入segy
                  
                  数据传过来，每四个字节为一个浮点数，该四个四节转为浮点数――先调转顺序，然后求得源码后，再调转顺序，使用float转为浮点数为正确数据（机器存储不一样）



9.22

              解析数据回传误差（完成）     数据传输完成命令，目前测试：手动停止传输，不按设定长度
待办：
             
              在数据上传完成以前，树节点不可点击（使其无效）
   
              重传机制，采集命令、震源引爆的重传，使用定时函数？？ CMainFrame.cpp 439行


9.28
             准备修改数据接收问题。按照第一个包的长度预留丢包数据空位（已完成）

9.30
             下位机多个同时发生数据，多个数据到达，该如何接收？？好像程序中一次只能走一个数据包？？    询问韩利那边WiFi转发的时候是怎么处理的，所以数据都是通过韩利的转发？？？？（已处理）
              解决：按照IP将数据包进行分类，然后对应IP对应线道进行存储

10.09
	目前WiFi上线通知是指WiFi已经与服务器建立好socket连接，后期优化：该通知为WiFi准备好，等待服务器为其分配IP（DecodeCOOR2MCU_WIFIREADY_d2），分配后再添加一个接受命令再发送采集命令

需调整：
	1.ZB全部上线后单播给协调器，WiFi可以上线（已完成）
	2.根据指令内容判断WiFi上线数目计数（DecodeCOOR2MCU_WIFIREADY_d2），全部上线后发送采集命令（已完成），是否需要回复给节点已收到上线通知（不需回复请参考5）
	3.开始采集发出后，节点采集到第一个数据时表明已开始采集，给服务器发送节点正常工作信号（需要新的协议），计数等待所有节点开始采集，服务器再通知震源引爆（此时震源应判断是否准备好）（完成）
	4.回传数据，判断何时全部上传完成？？接着判断丢包情况，请求重传（方法：判断packLast的值是否与包的个数相同，若相同则该节点数据传完）
	5.接收指令回复问题：不是每次接收到数据或指令后，服务器都立马需要回复，CMainFrame::MsgDeal中438行需要添加条件，在doc中添加IsFeedback????每一个decode都需要检查！！！（已完成）
	6.震源引爆时间回传给PC，PC获取后下发时间与采集长度给协调器，协调器广播，将该下发指令作为开始回传数据及设置采集时长指令和回复震源已收到指令（完成）

10.12       
	CIOCPModel 854行_IsSocketAlive函数可判断客户端是否断开，所以在devicedescribe中添加对应socket用于判断WiFi是否断开，再次链接时更新socket？？？？

10.14
	全部按流程将注释掉的代码加回，看能否通过测试（命令部分全部通过）

10.18
	修改了参数设置，采样间隔是采样率的倒数，修改了设置参数的单位

10.29   
	注释了丢包记录部分，使用vector写入时出现断点。

11.04
	修改接收多余一个包时的指针，修改后不会出现堆栈崩溃情况。
11.11
	使用网络调试助手接收两个节点数据，每次来一个包写入文件没问题，不会出现断点情况
	修改了文件写入的开关，不会频繁开关导致seek出错
11.23
	协调器和震源GPS添加可显示到地图上
	将触发时间读出在界面上显示（未完成）

12.05 
	处理了GPS格式，看能否显示
	震源和协调器节点不会再节点树显示
12.06
	加上震源深度
12.10
	丢包重传修改完毕，包括重新修改了文件创建位置（获取引爆时间函数中调用创建）和创建方法
	单炮的数据传输（包括丢包）完成之后再通知上传下一炮引爆时间
	丢包回传数据的方式与初次回传数据流程一致，需要注意的是：文件打开写入数据后的关闭条件，一定要关闭文件（目前是按照总包数判断是否关闭文件，有丢包时等待丢包数据全部上传计数，与应收数相同时关闭文件，若全部丢包的道已经回传，但是包数还是有差别，此时才强制关闭文件）
19.01.21
	进度条完成，根据来的包数计数显示百分数，最后显示丢包率
19.2.25
	修改数据解析存储，数据转义正确
	TODO：设置线道号
19.03.08
	完成线道分配，由于地图绘制缩放，利用转换为像素绘制后，有误差，需要找到修改办法减小误差（根据点击距离直接找到真实节点进行计算）

19.03.19
	问题：
		1.地图缩放大小，显示宽度
		2.发送数据，自己创建IO口
19.03.27
	地图缩放精确到小数后5位
	可以使用服务器数据发送







